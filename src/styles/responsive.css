/* ===========================
   Responsive Design System
   Mobile-First Approach
   =========================== */

/* ======================
   1. FLUID TYPOGRAPHY
   ====================== */

:root {
  /* Typography scale using clamp for fluid sizing */
  --text-xs: clamp(0.75rem, 2vw, 0.875rem);
  --text-sm: clamp(0.875rem, 2.2vw, 1rem);
  --text-base: clamp(1rem, 2.5vw, 1.125rem);
  --text-lg: clamp(1.125rem, 3vw, 1.25rem);
  --text-xl: clamp(1.25rem, 3.5vw, 1.5rem);
  --text-2xl: clamp(1.5rem, 4vw, 1.875rem);
  --text-3xl: clamp(1.75rem, 4.5vw, 2.25rem);
  --text-4xl: clamp(2rem, 5vw, 2.5rem);
  --text-5xl: clamp(2.5rem, 6vw, 3rem);
  
  /* Line height scale */
  --lh-tight: 1.2;
  --lh-snug: 1.375;
  --lh-normal: 1.5;
  --lh-relaxed: 1.625;
  --lh-loose: 1.875;

  /* Responsive spacing scale */
  --space-xs: clamp(0.5rem, 1vw, 0.75rem);
  --space-sm: clamp(0.75rem, 1.5vw, 1rem);
  --space-md: clamp(1rem, 2vw, 1.5rem);
  --space-lg: clamp(1.5rem, 2.5vw, 2rem);
  --space-xl: clamp(2rem, 3vw, 2.5rem);
  --space-2xl: clamp(2.5rem, 4vw, 3rem);
  --space-3xl: clamp(3rem, 5vw, 4rem);
}

/* =============================
   2. FLUID HEADING SIZES
   ============================= */

@layer components {
  .h1-responsive {
    @apply text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold tracking-tight leading-tight;
    font-size: clamp(1.75rem, 5vw, 3.5rem);
    line-height: clamp(2.25rem, 6vw, 4.5rem);
  }

  .h2-responsive {
    @apply text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold tracking-tight;
    font-size: clamp(1.5rem, 4vw, 2.75rem);
    line-height: clamp(2rem, 5vw, 3.75rem);
  }

  .h3-responsive {
    @apply text-lg sm:text-xl md:text-2xl lg:text-3xl font-semibold;
    font-size: clamp(1.25rem, 3vw, 2rem);
    line-height: clamp(1.75rem, 4vw, 3rem);
  }

  .h4-responsive {
    @apply text-base sm:text-lg md:text-xl font-semibold;
    font-size: clamp(1rem, 2.5vw, 1.5rem);
  }

  .body-responsive {
    @apply text-sm sm:text-base leading-relaxed;
    font-size: clamp(0.875rem, 2vw, 1.125rem);
  }

  .text-small-responsive {
    @apply text-xs sm:text-sm;
    font-size: clamp(0.75rem, 1.5vw, 0.875rem);
  }
}

/* ==============================
   3. TOUCH-FRIENDLY COMPONENTS
   ============================== */

@layer components {
  /* Minimum 44px touch target */
  .touch-target {
    @apply min-h-11 min-w-11 flex items-center justify-center;
  }

  /* Button sizing with 44px minimum */
  .btn-touch {
    @apply h-11 min-w-11 px-4 py-2.5 font-medium transition-colors rounded-lg;
  }

  .btn-touch-sm {
    @apply h-10 min-w-10 px-3 py-2 text-sm font-medium rounded-lg;
  }

  .btn-touch-lg {
    @apply h-12 min-w-12 px-6 py-3 font-semibold rounded-lg;
  }

  /* Icon buttons - 44x44px */
  .icon-btn {
    @apply w-11 h-11 flex items-center justify-center rounded-lg transition-colors;
  }

  .icon-btn-sm {
    @apply w-10 h-10 flex items-center justify-center rounded-lg transition-colors;
  }

  /* Form inputs - 44px height */
  .input-touch {
    @apply h-11 px-3 py-2.5 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors;
  }

  .input-touch-sm {
    @apply h-10 px-3 py-2 text-sm rounded-lg border border-input bg-background;
  }

  /* Checkbox/Radio with adequate touch targets */
  .checkbox-touch {
    @apply w-5 h-5 cursor-pointer;
  }

  /* Links with proper hit targets */
  .link-touch {
    @apply py-2 px-2 rounded -my-2 -mx-2 focus:outline-none focus:ring-2 focus:ring-primary;
  }
}

/* ==================================
   4. RESPONSIVE SPACING UTILITIES
   ================================== */

@layer components {
  /* Responsive padding for sections */
  .pad-responsive {
    @apply px-3 py-4 xs:px-4 xs:py-5 sm:px-6 sm:py-6 md:px-8 md:py-8 lg:px-10 lg:py-12;
  }

  /* Container padding */
  .container-pad {
    @apply px-4 sm:px-6 md:px-8 lg:px-10;
  }

  /* Section spacing */
  .section-spacing {
    @apply py-8 sm:py-10 md:py-12 lg:py-16;
  }

  /*  Grid gap scaling */
  .gap-responsive {
    @apply gap-2 xs:gap-3 sm:gap-4 md:gap-5 lg:gap-6;
  }

  /* Responsive margin for top sections */
  .mt-responsive {
    @apply mt-4 sm:mt-6 md:mt-8 lg:mt-12;
  }

  .mb-responsive {
    @apply mb-4 sm:mb-6 md:mb-8 lg:mb-12;
  }
}

/* ==================================
   5. RESPONSIVE GRID PATTERNS
   ================================== */

@layer components {
  /* Product Grid - scales from 1 to 6 columns */
  .grid-products {
    @apply grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-2 xs:gap-3 sm:gap-4 md:gap-5;
  }

  /* Feature Grid - scales from 1 to 4 columns */
  .grid-features {
    @apply grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6;
  }

  /* Two Column Layout - responsive */
  .grid-two {
    @apply grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 lg:gap-8;
  }

  /* Three Column Layout - responsive */
  .grid-three {
    @apply grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6;
  }

  /* Four Column Layout - responsive */
  .grid-four {
    @apply grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-5;
  }

  /* Category Grid - scales from 3 to 6 */
  .grid-categories {
    @apply grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 xs:gap-3 sm:gap-4;
  }
}

/* ================================
   6. RESPONSIVE FLEX PATTERNS
   ================================ */

@layer components {
  /* Navigation flex - responsive direction */
  .flex-nav {
    @apply flex flex-col xs:flex-row gap-2 xs:gap-3 items-start xs:items-center;
  }

  /* Button group - responsive wrap */
  .flex-btn-group {
    @apply flex flex-wrap gap-2 xs:gap-3 sm:gap-4;
  }

  /* Card content flex - responsive gap */
  .flex-card {
    @apply flex flex-col gap-2 xs:gap-3 sm:gap-4;
  }

  /* Header flex - responsive spacing */
  .flex-header {
    @apply flex flex-col xs:flex-row xs:items-center xs:justify-between gap-3 xs:gap-4;
  }
}

/* ==================================
   7. RESPONSIVE CARD PATTERNS
   ================================== */

@layer components {
  /* Card with responsive padding */
  .card-responsive {
    @apply p-3 xs:p-4 sm:p-5 md:p-6 rounded-lg border border-border bg-card shadow-sm hover:shadow-md transition-shadow;
  }

  /* Feature card */
  .card-feature {
    @apply p-4 sm:p-6 lg:p-8 rounded-lg bg-card border border-border;
  }

  /* Product card */
  .card-product {
    @apply rounded-lg overflow-hidden border border-border bg-card hover:shadow-lg transition-shadow;
  }
}

/* =================================
   8. RESPONSIVE MODAL PATTERNS
   ================================= */

@layer components {
  /* Mobile-optimized modal */
  .modal-responsive {
    @apply fixed inset-0 z-50 flex items-end xs:items-center justify-center;
  }

  /* Modal content - sheet on mobile, dialog on desktop */
  .modal-content {
    @apply w-full xs:max-w-md rounded-t-lg xs:rounded-lg bg-background shadow-lg max-h-screen xs:max-h-[90vh] overflow-y-auto;
  }

  /* Modal header with responsive padding */
  .modal-header {
    @apply px-4 sm:px-6 py-3 sm:py-4 border-b border-border;
  }

  /* Modal body with responsive padding */
  .modal-body {
    @apply px-4 sm:px-6 py-4 sm:py-6;
  }

  /* Modal footer with responsive spacing */
  .modal-footer {
    @apply px-4 sm:px-6 py-3 sm:py-4 border-t border-border flex flex-col-reverse xs:flex-row gap-2 xs:gap-3 xs:justify-end;
  }
}

/* ======================================
   9. RESPONSIVE TABLE PATTERNS
   ====================================== */

@layer components {
  /* Responsive table - stacks on mobile */
  .table-responsive {
    @apply w-full border-collapse;
  }

  .table-responsive thead {
    @apply bg-muted hidden md:table-header-group;
  }

  .table-responsive tbody tr {
    @apply block md:table-row border-b border-border mb-4 md:mb-0;
  }

  .table-responsive td, 
  .table-responsive th {
    @apply block md:table-cell px-3 sm:px-4 py-2 text-sm;
  }

  /* Mobile label for table cells */
  .table-responsive tbody td::before {
    content: attr(data-label);
    @apply font-semibold float-left md:display-none md:float-none;
  }
}

/* =================================
   10. SAFE AREA SUPPORT
   ================================= */

@layer utilities {
  .safe-pad-top {
    padding-top: max(var(--space-sm), env(safe-area-inset-top));
  }

  .safe-pad-bottom {
    padding-bottom: max(var(--space-sm), env(safe-area-inset-bottom));
  }

  .safe-pad-left {
    padding-left: max(var(--space-sm), env(safe-area-inset-left));
  }

  .safe-pad-right {
    padding-right: max(var(--space-sm), env(safe-area-inset-right));
  }

  .safe-pad {
    padding: max(var(--space-sm), env(safe-area-inset-top))
             max(var(--space-sm), env(safe-area-inset-right))
             max(var(--space-sm), env(safe-area-inset-bottom))
             max(var(--space-sm), env(safe-area-inset-left));
  }

  /* For bottom navigation items */
  .safe-bottom-nav {
    padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
  }
}

/* =================================
   11. RESPONSIVE IMAGES
   ================================= */

@layer components {
  /* Responsive image container */
  .img-responsive {
    @apply w-full h-auto;
  }

  /* Image with aspect ratio */
  .img-aspect {
    @apply w-full aspect-video object-cover rounded-lg;
  }

  .img-aspect-square {
    @apply w-full aspect-square object-cover rounded-lg;
  }

  .img-aspect-4-3 {
    @apply w-full aspect-[4/3] object-cover rounded-lg;
  }

  /* Product image container - responsive */
  .img-product {
    @apply w-full aspect-square object-cover rounded-lg bg-muted;
  }
}

/* ====================================
   12. RESPONSIVE NAVIGATION
   ==================================== */

@layer components {
  /* Mobile-first menu */
  .nav-menu {
    @apply hidden md:flex;
  }

  . nav-mobile {
    @apply md:hidden;
  }

  /* Navigation item spacing */
  .nav-item {
    @apply px-3 py-2 xs:px-4 rounded-lg transition-colors;
  }

  /* Responsive nav gap */
  .nav-items {
    @apply flex flex-col md:flex-row md:gap-1 gap-1;
  }
}

/* ====================================
   13. RESPONSIVE ANIMATIONS
   ==================================== */

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Optimize animations for mobile */
@media (max-width: 640px) {
  * {
    animation-duration: 200ms;
  }

  /* Disable expensive animations on mobile */
  .animate-float {
    animation: none;
  }

  .animate-gradient-shift {
    animation: none;
  }
}

/* ====================================
   14. RESPONSIVE SCROLLING
   ==================================== */

@layer utilities {
  .overflow-x-auto-mobile {
    @apply xs:overflow-x-auto md:overflow-x-visible;
  }

  .scroll-snap-x {
    @apply overflow-x-auto scroll-smooth snap-x snap-mandatory;
  }

  .snap-center-mobile {
    @apply snap-center md:snap-start;
  }
}

/* ====================================
   15. PRINT STYLES
   ==================================== */

@media print {
  /* Hide navigation on print */
  .no-print {
    display: none !important;
  }

  /* Optimize typography for print */
  body {
    font-size: 12pt;
    line-height: 1.5;
  }

  /* Avoid page breaks in cards */
  .no-break {
    page-break-inside: avoid;
  }
}

/* ====================================
   16. LANDSCAPE MODE HANDLING
   ==================================== */

@media (max-height: 500px) and (orientation: landscape) {
  /* Reduce padding on short screens */
  .pad-responsive {
    @apply py-2 xs:py-3 sm:py-4;
  }

  /* More compact typography */
  .h1-responsive {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
  }
}

/* ====================================
   17. KEYBOARD & INPUT FOCUS
   ==================================== */

@layer utilities {
  /* Better focus states for mobile */
  .focus-mobile {
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background;
  }

  /* Prevent outline on mouse focus (visible on keyboard focus) */
  .focus-visible-only {
    outline: none;
  }

  .focus-visible-only:focus-visible {
    @apply outline-2 outline-primary outline-offset-2;
  }
}

/* ====================================
   18. BOTTOM SHEET MODAL MOBILE
   ==================================== */

@layer components {
  .bottom-sheet {
    @apply fixed bottom-0 left-0 right-0 z-50 bg-background rounded-t-2xl shadow-2xl md:static md:rounded-lg md:bg-card md:border md:border-border;
    animation: slideUp 0.3s ease-out;
  }

  .bottom-sheet-visible {
    @apply translate-y-0;
  }

  .bottom-sheet-hidden {
    @apply translate-y-full;
  }

  /* Grab handle on mobile */
  .bottom-sheet-handle {
    @apply h-1 w-12 rounded-full bg-muted mx-auto mb-4 md:hidden;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }
}

/* ====================================
   19. RESPONSIVE STATES
   ==================================== */

@media (hover: hover) {
  /* Only apply hover effects on devices that support hovering */
  .hover-effect {
    @apply hover:shadow-lg hover:scale-105 transition-transform;
  }
}

@media (hover: none) {
  /* Touch devices without hover capability */
  .hover-effect {
    @apply active:shadow-lg active:scale-105 transition-transform;
  }
}

/* ==================================
   20. DARK MODE RESPONSIVE
   ================================== */

@media (prefers-color-scheme: dark) {
  /* Ensure contrast on dark mode mobile */
  .text-responsive {
    @apply text-gray-200 dark:text-gray-100;
  }

  /* Reduce brightness of images in dark mode */
  img {
    filter: brightness(0.9) contrast(1.1);
  }
}
